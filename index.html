<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Attendance PWA</title>

<style>
:root{
  --p:#22c55e;
  --a:#ef4444;
  --h:#f59e0b;
  --glass:rgba(255,255,255,.35);
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont}
body{
  margin:0;
  background:#f2f2f2;
  padding:12px;
}
.card{
  max-width:420px;
  margin:auto;
  background:white;
  border-radius:18px;
  padding:16px;
}
h2{text-align:center;margin:6px 0 12px}
.counts{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-bottom:10px;
}
.btns{
  display:flex;
  gap:10px;
}
button{
  flex:1;
  border:none;
  padding:14px;
  border-radius:14px;
  font-weight:600;
  backdrop-filter:blur(10px);
  background:var(--glass);
  box-shadow:0 8px 20px rgba(0,0,0,.12);
  transition:.15s;
}
button:active{
  transform:scale(.95);
  box-shadow:inset 0 0 20px rgba(255,255,255,.4);
}
#calendar{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
  text-align:center;
}
.day{
  font-size:11px;
  font-weight:600;
}
.cell{
  padding:8px 0;
  border-radius:10px;
  background:#eee;
  font-size:12px;
}
.P{background:var(--p);color:white}
.A{background:var(--a);color:white}
.H{background:var(--h);color:white}
.today{outline:2px solid #000}
</style>
</head>

<body>
<div class="card">
  <h2 id="title"></h2>

  <div class="counts">
    <div>Present: <b id="pc">0</b></div>
    <div>Absent: <b id="ac">0</b></div>
  </div>

  <div class="btns">
    <button onclick="mark('P')">Present</button>
    <button onclick="mark('A')">Absent</button>
    <button onclick="mark('H')">Holiday</button>
    <button onclick="undo()">Undo</button>
  </div>

  <div id="calendar"></div>
</div>

<script>
const attendance = JSON.parse(localStorage.getItem("attendance")||"{}");
const today = new Date();
const todayKey = today.toISOString().slice(0,10);

function save(){
  localStorage.setItem("attendance",JSON.stringify(attendance));
  render();
}

function mark(s){
  attendance[todayKey]=s;
  save();
}
function undo(){
  delete attendance[todayKey];
  save();
}

function render(){
  const cal=document.getElementById("calendar");
  cal.innerHTML="";

  const y=today.getFullYear(), m=today.getMonth();
  document.getElementById("title").textContent =
    today.toLocaleString("default",{month:"long",year:"numeric"});

  ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(d=>{
    const e=document.createElement("div");
    e.className="day"; e.textContent=d; cal.appendChild(e);
  });

  const first=new Date(y,m,1).getDay();
  for(let i=0;i<first;i++) cal.appendChild(document.createElement("div"));

  let P=0,A=0;
  const days=new Date(y,m+1,0).getDate();
  for(let d=1;d<=days;d++){
    const key=new Date(y,m,d).toISOString().slice(0,10);
    const cell=document.createElement("div");
    cell.className="cell";

    const isSun=new Date(y,m,d).getDay()===0;
    const status=isSun?"H":attendance[key];

    if(status) cell.classList.add(status);
    if(key===todayKey) cell.classList.add("today");

    if(attendance[key]==="P") P++;
    if(attendance[key]==="A") A++;

    cell.textContent=d;
    cal.appendChild(cell);
  }
  document.getElementById("pc").textContent=P;
  document.getElementById("ac").textContent=A;
}

render();
</script>
</body>
</html>

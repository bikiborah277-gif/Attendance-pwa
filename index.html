<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Attendance</title>

<style>
:root{
  --glass: rgba(255,255,255,0.65);
  --border: rgba(0,0,0,0.08);
  --green:#34c759;
  --red:#ff3b30;
  --blue:#007aff;
  --muted:#888;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:#fff;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}

.app{
  width:100%;
  max-width:100%;
  padding:16px;
}

/* ---------- HEADER ---------- */
h2{
  text-align:center;
  margin:10px 0 20px;
  font-weight:600;
}

/* ---------- TOP BAR ---------- */
.top{
  display:flex;
  gap:8px;
  width:100%;
}

input{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--glass);
  font-size:16px;
}

button{
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--glass);
  font-size:16px;
  cursor:pointer;
  backdrop-filter: blur(14px);
  transition:transform .1s ease, box-shadow .1s ease;
}

button:active{
  transform:scale(.95);
  box-shadow: inset 0 2px 6px rgba(0,0,0,.15);
}

/* ---------- SUBJECT CARD ---------- */
.card{
  margin-top:14px;
  padding:14px;
  border-radius:16px;
  border:1px solid var(--border);
  background:var(--glass);
}

.subject{
  font-weight:600;
  margin-bottom:6px;
}

/* ---------- COUNTS ---------- */
.counts{
  font-size:13px;
  color:var(--muted);
  margin-bottom:10px;
}

/* ---------- BUTTON ROW ---------- */
.actions{
  display:flex;
  gap:8px;
}

.present{color:var(--green)}
.absent{color:var(--red)}
.undo{font-size:18px}

/* ---------- PERCENT ---------- */
.percent{
  text-align:right;
  font-size:14px;
  font-weight:600;
}

.low{color:var(--red)}
.ok{color:var(--green)}

/* ---------- DESKTOP UPGRADE ---------- */
@media(min-width:768px){
  .app{
    max-width:720px;
    margin:auto;
  }
}
</style>
</head>

<body>
<div class="app">

<h2>Attendance</h2>

<div class="top">
  <input id="subInput" placeholder="Add subject">
  <button onclick="addSubject()">＋</button>
</div>

<div id="list"></div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("att")) || [];

function save(){
  localStorage.setItem("att",JSON.stringify(data));
}

function addSubject(){
  const name = subInput.value.trim();
  if(!name) return;
  data.push({name, p:0, a:0});
  subInput.value="";
  save();
  render();
}

function mark(i,type){
  if(type==="p") data[i].p++;
  if(type==="a") data[i].a++;
  save();
  render();
}

function undo(i){
  if(data[i].p>0) data[i].p--;
  else if(data[i].a>0) data[i].a--;
  save();
  render();
}

function render(){
  list.innerHTML="";
  data.forEach((s,i)=>{
    const total=s.p+s.a;
    const percent= total? ((s.p/total)*100).toFixed(1):0;
    const status= percent<75?"low":"ok";

    list.innerHTML+=`
      <div class="card">
        <div class="subject">${s.name}</div>

        <div class="counts">
          ✔ ${s.p} days &nbsp;&nbsp; ✖ ${s.a} days
        </div>

        <div class="actions">
          <button class="present" onclick="mark(${i},'p')">Present</button>
          <button class="absent" onclick="mark(${i},'a')">Absent</button>
          <button class="undo" onclick="undo(${i})">↶</button>
        </div>

        <div class="percent ${status}">
          ${percent}%
        </div>
      </div>
    `;
  });
}

render();
</script>

</body>
</html>
